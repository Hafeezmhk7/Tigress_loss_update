import data.processed
import modules.model

# ––– TRAINING ARGUMENTS ––––
train.iterations=200000
train.learning_rate=0.0003
train.weight_decay=0.035
train.batch_size=256
train.vae_input_dim=768
train.vae_n_layers=3
train.vae_n_cat_feats=0
train.vae_hidden_dims=[512, 256, 128]
train.vae_embed_dim=32  
train.vae_codebook_size=256
train.vae_codebook_normalize=False
train.vae_sim_vq=False
train.save_model_every=40000
train.eval_every=200000
train.log_every=5000
train.dataset=%data.processed.RecDataset.AMAZON
train.force_dataset_process=False
train.dropout_p=0.3
train.attn_heads=8
train.attn_embed_dim=512
train.attn_layers=8
train.decoder_embed_dim=128
train.model_jagged_mode=True
train.category="brand"
train.debug=False
train.dataset_folder="dataset/amazon/2014"
train.wandb_logging=True
train.dataset_split="beauty"
train.log_dir="logdir/decoder/amazon/2014"
train.pretrained_decoder_path=None
train.pretrained_rqvae_path=None
train.use_image_features=True # for multi-modal semantic ids
train.feature_combination_mode="concat" # sum or concat if use_image_features
train.enable_image_cross_attn=False
train.run_prefix="debug" # for wandb
train.rope=False # todo: fix
train.prefix_matching=False # todo: fix

# ––– TESTING ARGUMENTS ––––
test.batch_size=512
test.vae_input_dim=768
test.vae_n_layers=3
test.vae_n_cat_feats=0
test.vae_hidden_dims=[512, 256, 128]
test.vae_embed_dim=32  
test.vae_codebook_size=256
test.vae_codebook_normalize=False
test.vae_sim_vq=False
test.dataset=%data.processed.RecDataset.AMAZON
test.force_dataset_process=False
test.dropout_p=0.3
test.attn_heads=8
test.attn_embed_dim=512
test.attn_layers=8
test.decoder_embed_dim=128
test.model_jagged_mode=True
test.category="brand"
test.debug=False
test.wandb_logging=False
test.dataset_folder="dataset/amazon/2023"
test.dataset_split="beauty"
test.use_image_features=True
test.feature_combination_mode="concat " # sum or concat if use_image_features
train.enable_image_cross_attn=False
test.run_prefix="debug"

# ––– Amazon-2014 –––
## TIGER

# -- beauty --
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2014/beauty/1749670228/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2014/beauty/1749779426/checkpoint_200000.pt"

# -- sports -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2014/sports/1749670527/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2014/sports/1750188998/checkpoint_200000.pt"

# -- toys -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2014/toys/1749670347/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2014/toys/1749780487/checkpoint_200000.pt"

## TIGRESS
# -- beauty --
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2014/beauty/1749948820/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2014/beauty/1750296496/checkpoint_200000.pt"

# -- sports -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2014/sports/1749950218/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2014/sports/1750312346/checkpoint_200000.pt"

# -- toys -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2014/toys/1749950278/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2014/toys/1750312203/checkpoint_200000.pt"


# ––– Amazon-2023 –––

## TIGER

# -- beauty --
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/beauty/1750516729/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/beauty/1750518050/checkpoint_200000.pt"

# -- sports -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/sports/1750516310/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/sports/1750562267/checkpoint_200000.pt"

# -- toys -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/toys/1750516446/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/toys/1750562505/checkpoint_200000.pt"

# -- games -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/games/1750517268/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/games/1750619301/checkpoint_200000.pt"

# -- software -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/software/1750517045/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/software/1750619515/checkpoint_200000.pt"


## TIGRESS
# -- beauty --
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/beauty/1750618001/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/beauty/1750619946/checkpoint_200000.pt"

# -- sports -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/sports/1750618180/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/sports/1750801581/checkpoint_200000.pt"

# -- toys -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/toys/1750617741/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/toys/1750642293/checkpoint_200000.pt"

# -- games -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/games/1750643230/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/games/1750648522/checkpoint_200000.pt"

# -- software -- 
# test.pretrained_rqvae_path="/home/scur2745/logdir/rqvae/amazon/2023/software/1750812789/checkpoint_400000.pt"
# test.pretrained_decoder_path="/home/scur2745/logdir/decoder/amazon/2023/software/1750819697/checkpoint_200000.pt"

test.rope=False # todo: fix
test.prefix_matching=False # todo: fix


# Hafeez Experiments on the modification of loss for only beauty dataset for the 2024 dataset.
# All Three Loss functions
#train.pretrained_rqvae_path = "/home/scur0555/logdir/rqvae/amazon/2014/beauty/1766755718/checkpoint_400000.pt"

# Multi Scale and CoST InfoNCE
#train.pretrained_rqvae_path = "/home/scur0555/logdir/rqvae/amazon/2014/beauty/1766753927/checkpoint_400000.pt"

# Multi Scale and Encoder InfoNCE
#train.pretrained_rqvae_path = "/home/scur0555/logdir/rqvae/amazon/2014/beauty/1766752320/checkpoint_400000.pt"

# Multi Scale InfoNCE
train.pretrained_rqvae_path = "/home/scur0555/logdir/rqvae/amazon/2014/beauty/1766750552/checkpoint_400000.pt"

# No Modifications in the Tiger Loss
#train.pretrained_rqvae_path = "/home/scur0555/logdir/rqvae/amazon/2014/beauty/1766749068/checkpoint_400000.pt"